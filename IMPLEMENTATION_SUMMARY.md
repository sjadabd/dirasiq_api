# ููุฎุต ุชูููุฐ ูุธุงู ุฅุฏุงุฑุฉ ุณุนุฉ ุงูุทูุงุจ

## โ ุงูููุงู ุงูููุชููุฉ

### 1. ุฅุถุงูุฉ ุญูู `current_students` ุฅูู `teacher_subscriptions`
- โ ุฅุถุงูุฉ ุงูุญูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชุญุฏูุซ ุงููููุฐุฌ ูุงูุฃููุงุน
- โ ุฅุถุงูุฉ ุฏูุงู ุฅุฏุงุฑุฉ ุงูุนุฏุฏ

### 2. ููุทู ุงูุชุญูู ุนูุฏ ูุจูู ุงูุญุฌุฒ
- โ ุงูุชุญูู ูู ุงูุณุนุฉ ูุจู ุงููุจูู
- โ ุชุญุฏูุซ ุงูุนุฏุฏ ุนูุฏ ุงููุจูู/ุงูุฅูุบุงุก
- โ ููุน ุงูุชูุงุนุจ ูู ุงูุญุฌูุฒุงุช

### 3. ุฅุฌุฑุงุกุงุช ุงูุฃูุงู
- โ ููุน ุชุบููุฑ ุงูุญุงูุฉ ุฃูุซุฑ ูู ูุฑุฉ
- โ ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู
- โ ุงูุชุญูู ูู ุงูุณุนุฉ ุงููุชุงุญุฉ

### 4. ุฌุฏูู `booking_usage_logs`
- โ ุฅูุดุงุก ุงูุฌุฏูู
- โ ุฅูุดุงุก ุงููููุฐุฌ
- โ ุชุณุฌูู ุฌููุน ุงูุนูููุงุช

## ๐ ุงููููุงุช ุงูููุดุฃุฉ/ุงููุญุฏุซุฉ

### ูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `src/database/migrations/011_add_current_students_to_teacher_subscriptions.sql`
- `src/database/migrations/012_create_booking_usage_logs_table.sql`
- `src/database/migrations/run_all_migrations.sql`

### ุงูููุงุฐุฌ (Models)
- `src/models/teacher-subscription.model.ts` (ูุญุฏุซ)
- `src/models/course-booking.model.ts` (ูุญุฏุซ)
- `src/models/booking-usage-log.model.ts` (ุฌุฏูุฏ)

### ุงูุฃููุงุน (Types)
- `src/types/index.ts` (ูุญุฏุซ)

### ูููุงุช ุงูุชุดุบูู
- `run_migrations.js`
- `run_migrations.bat` (Windows)
- `run_migrations.sh` (Linux/Mac)

### ุงูุชูุซูู
- `STUDENT_CAPACITY_MANAGEMENT.md`
- `IMPLEMENTATION_SUMMARY.md`

## ๐ ููููุฉ ุงูุชุดุบูู

### 1. ุชุดุบูู ุงููุงูุฌุฑูุดูุฒ
```bash
# ุนูู Windows
run_migrations.bat

# ุนูู Linux/Mac
./run_migrations.sh

# ุฃู ูุจุงุดุฑุฉ
node run_migrations.js
```

### 2. ุงูุชุญูู ูู ุงูุชุทุจูู
```typescript
// ุงูุชุญูู ูู ุงูุณุนุฉ
const capacityCheck = await TeacherSubscriptionModel.canAddStudent(teacherId);
if (!capacityCheck.canAdd) {
  console.log(capacityCheck.message);
}

// ุฌูุจ ุฅุญุตุงุฆูุงุช ุงููุนูู
const stats = await BookingUsageLogModel.getTeacherUsageStats(teacherId);
console.log(`ุงูุทูุงุจ: ${stats.currentStudents}/${stats.maxStudents}`);
```

## ๐ง ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### ุฏูุงู `TeacherSubscriptionModel`
- `incrementCurrentStudents()`: ุฒูุงุฏุฉ ุนุฏุฏ ุงูุทูุงุจ
- `decrementCurrentStudents()`: ุชูููู ุนุฏุฏ ุงูุทูุงุจ
- `canAddStudent()`: ุงูุชุญูู ูู ุฅููุงููุฉ ุฅุถุงูุฉ ุทุงูุจ
- `recalculateCurrentStudents()`: ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุนุฏุฏ

### ุฏูุงู `CourseBookingModel`
- `logBookingUsage()`: ุชุณุฌูู ุงุณุชุฎุฏุงู ุงูุญุฌุฒ
- ุชุญุฏูุซ `updateStatus()`: ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุณุนุฉ
- ุชุญุฏูุซ ุฏูุงู ุงูุฅูุบุงุก: ุฅุถุงูุฉ ุชุณุฌูู ุงูุงุณุชุฎุฏุงู

### ุฏูุงู `BookingUsageLogModel`
- `create()`: ุฅูุดุงุก ุณุฌู ุงุณุชุฎุฏุงู
- `findByTeacherId()`: ุฌูุจ ุณุฌูุงุช ูุนูู
- `getTeacherUsageStats()`: ุฅุญุตุงุฆูุงุช ุงุณุชุฎุฏุงู ุงููุนูู

## ๐ก๏ธ ุงูุฃูุงู ูุงูููุซูููุฉ

### ููุน ุงูุชูุงุนุจ
- ููุน ุชุบููุฑ ุงูุญุงูุฉ ุฃูุซุฑ ูู ูุฑุฉ
- ููุน ูุจูู ุญุฌุฒ ูุฑููุถ ูุณุจููุง
- ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุงุดุชุฑุงู

### ุถูุงู ุงูุงุชุณุงู
- ุงุณุชุฎุฏุงู Transactions ูุฌููุน ุงูุนูููุงุช
- ุชุญุฏูุซ ุงูุนุฏุฏ ุชููุงุฆููุง
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ุนุฏู ุชุฃุซูุฑ ุชุณุฌูู ุงูุงุณุชุฎุฏุงู ุนูู ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

## ๐ ุงูุชุญูููุงุช ูุงูุฅุญุตุงุฆูุงุช

### ุจูุงูุงุช ูุชุงุญุฉ
- ุนุฏุฏ ุงูุทูุงุจ ุงูุญุงูููู ููุงุจู ุงูุณุนุฉ ุงููุตูู
- ุฅุญุตุงุฆูุงุช ุงููุจูู ูุงูุฑูุถ ูุงูุฅูุบุงุก
- ุณุฌู ูุงูู ูุฌููุน ุงูุนูููุงุช
- ุชุชุจุน ูู ูุงู ุจูู ุนูููุฉ

### ุงุณุชุฎุฏุงูุงุช ุงูุชุญูููุงุช
- ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูุจุงูุงุช
- ุชุญููู ุณููู ุงููุนูููู ูุงูุทูุงุจ
- ุชุญุณูู ุชุฎุตูุต ุงูุจุงูุงุช
- ุชูุงุฑูุฑ ููุตูุฉ ููุงุฏุงุฑุฉ

## ๐ฏ ุงููุชุงุฆุฌ ุงููุญููุฉ

### โ ุงูุชุญูู ูู ุงูุณุนุฉ
- ููุน ุชุฌุงูุฒ ุงูุณุนุฉ ุงููุญุฏุฏุฉ
- ุชุชุจุน ุฏููู ูุนุฏุฏ ุงูุทูุงุจ
- ุชุญุฏูุซ ุชููุงุฆู ููุนุฏุงุฏ

### โ ุงูุฃูุงู
- ููุน ุงูุชูุงุนุจ ูู ุงูุญุฌูุฒุงุช
- ุงูุชุญูู ูู ุตุญุฉ ุงูุนูููุงุช
- ุญูุงูุฉ ูู ุงูุซุบุฑุงุช

### โ ุงูุดูุงููุฉ
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช
- ุชุชุจุน ูู ูุงู ุจูู ุนูููุฉ
- ุณุฌู ูุงูู ููุชุญูููุงุช

### โ ุงูููุซูููุฉ
- ุงุณุชุฎุฏุงู Transactions
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุถูุงู ุงูุงุชุณุงู

## ๐ ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู

- โ ูุชูุงูู ูุน ุงูุจููุฉ ุงูููุฌูุฏุฉ
- โ ูุง ูุคุซุฑ ุนูู ุงููุธุงุฆู ุงูุญุงููุฉ
- โ ุฅุถุงูุฉ ุชุฏุฑูุฌูุฉ ููููุฒุงุช ุงูุฌุฏูุฏุฉ
- โ ุณูููุฉ ุงูุตูุงูุฉ ูุงูุชุทููุฑ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

1. **ุงุฎุชุจุงุฑ ุงููุธุงู**: ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน ุงูุณููุงุฑูููุงุช
2. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ูุฑุงูุจุฉ ุชุฃุซูุฑ ุงููุธุงู ุนูู ุงูุฃุฏุงุก
3. **ุชุญุณููุงุช ุฅุถุงููุฉ**: ุฅุถุงูุฉ ููุฒุงุช ุชุญููููุฉ ูุชูุฏูุฉ
4. **ูุงุฌูุฉ ุงููุณุชุฎุฏู**: ุชุทููุฑ ูุงุฌูุงุช ูุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
5. **ุงูุชูุงุฑูุฑ**: ุฅูุดุงุก ุชูุงุฑูุฑ ุฏูุฑูุฉ ููุงุฏุงุฑุฉ

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชูููุฐ ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุณุนุฉ ุงูุทูุงุจ ูู ุงุดุชุฑุงูุงุช ุงููุนูููู ุจูุฌุงุญุ ูุชุถูู:

- **ุงูุชุญูู ุงูุฏููู** ูู ุงูุณุนุฉ
- **ุงูุฃูุงู ูุงูููุซูููุฉ** ูู ุงูุนูููุงุช
- **ุงูุดูุงููุฉ ุงููุงููุฉ** ูู ุงูุชุชุจุน
- **ุงูุชุญูููุงุช ุงููุชูุฏูุฉ** ููุจูุงูุงุช

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููููู ุชุดุบููู ููุฑุงู ุจุงุณุชุฎุฏุงู ูููุงุช ุงููุงูุฌุฑูุดูุฒ ุงููุฑููุฉ.
