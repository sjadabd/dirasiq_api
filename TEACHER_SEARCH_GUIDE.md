# ุฏููู ุชุดุบูู ููุฒุฉ ุงููููุน ูุงูุจุญุซ ุนู ุงููุฏุฑุณูู ุงููุฑูุจูู (ุงูุนุฑุงู)

## ๐ฏ ุงููุฏู
ุชูููู ุงูุทูุงุจ ูู ุงูุจุญุซ ุนู ุงููุฏุฑุณูู ุงููุฑูุจูู ุจูุงุกู ุนูู:
- ูููุนูู ุงูุฌุบุฑุงูู (ุฅุญุฏุงุซูุงุช)
- ุงููุญุงูุธุฉ/ุงููุฏููุฉ/ุงูููุทูุฉ

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุญููู ุงููุทููุจุฉ ูู ุฌุฏูู `users`:
```sql
-- ุฅุถุงูุฉ ุญููู ุงููููุน ุงูุชูุตูููุฉ
ALTER TABLE users 
ADD COLUMN IF NOT EXISTS governorate VARCHAR(100),
ADD COLUMN IF NOT EXISTS city VARCHAR(100),
ADD COLUMN IF NOT EXISTS district VARCHAR(100),
ADD COLUMN IF NOT EXISTS street VARCHAR(255),
ADD COLUMN IF NOT EXISTS country_code VARCHAR(3) DEFAULT 'IQ',
ADD COLUMN IF NOT EXISTS postcode VARCHAR(10);
```

### ุงููุญุงูุธุงุช ุงูุนุฑุงููุฉ ุงููุฏุนููุฉ:
- **ุจุบุฏุงุฏ**: ุงูุนุงุตูุฉ - ุงููุฑุฎุ ุงูุฑุตุงูุฉุ ุงูุฃุนุธููุฉุ ุงูุฒุนูุฑุงููุฉ
- **ุงูุจุตุฑุฉ**: ุงููููุงุก ุงูุฑุฆูุณู - ุงูุฒุจูุฑุ ุฃุจู ุงูุฎุตูุจุ ุงููุฑูุฉ
- **ุงูููุตู**: ููููู - ุงูุญูุฏุงููุฉุ ุชูุนูุฑุ ุณูุฌุงุฑ
- **ุฃุฑุจูู**: ุฅูููู ูุฑุฏุณุชุงู - ููููุ ูุฎููุฑุ ุฎุจุงุช
- **ุงูุณูููุงููุฉ**: ุฅูููู ูุฑุฏุณุชุงู - ุจูุฌูููุ ููุงุฏุฒูุ ุฑุงููุฉ
- **ุฏููู**: ุฅูููู ูุฑุฏุณุชุงู - ุฒุงุฎูุ ุนูุงุฏูุฉ
- **ูุฑููู**: ูุฑููู - ุฏุงูููุ ุงูุญููุฌุฉ
- **ุงูุฃูุจุงุฑ**: ุงูุฑูุงุฏูุ ุงููููุฌุฉุ ููุชุ ุญุฏูุซุฉ
- **ุงููุฌู**: ุงููุฌู ุงูุฃุดุฑู - ุงููููุฉุ ุงูููุงุฐุฑุฉ
- **ูุฑุจูุงุก**: ูุฑุจูุงุก ุงูููุฏุณุฉ - ุนูู ุงูุชูุฑ
- **ุจุงุจู**: ุงูุญูุฉ - ุงููุญููุฏูุฉุ ุงููุณูุจุ ุงูููุฏูุฉ
- **ูุงุณุท**: ุงูููุช - ุจุฏุฑุฉุ ุงูุฒุจูุฑูุฉ
- **ุตูุงุญ ุงูุฏูู**: ุชูุฑูุช - ุจูุฌูุ ุจูุฏุ ุฏุฌูู
- **ุฏูุงูู**: ุจุนููุจุฉ - ุงูุฎุงูุตุ ุจูุฏุฑูุฒุ ุฎุงูููู
- **ุงููุงุฏุณูุฉ**: ุงูุฏููุงููุฉ - ุงูุดูุงููุฉ
- **ุฐู ูุงุฑ**: ุงููุงุตุฑูุฉ - ุงูุดุทุฑุฉุ ุงูุฑูุงุนู
- **ููุณุงู**: ุงูุนูุงุฑุฉ - ุงููุฌุฑ ุงููุจูุฑุ ุงููุญูุงุก

## ๐ ุชุฏูู ุชุณุฌูู ุงููุนูู

### 1. ุนูุฏ ุงูุชุณุฌูู:
- ุงููุนูู ูุฑุณู `latitude` ู `longitude`
- ุงููุธุงู ูุนูู Reverse Geocoding ุจุงุณุชุฎุฏุงู OpenStreetMap Nominatim
- ูุญุตู ุนูู: ุงููุญุงูุธุฉุ ุงููุฏููุฉุ ุงููุงุญูุฉุ ุงูุดุงุฑุน
- ูุฎุฒู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุนูุฏ ุชุญุฏูุซ ุงููููุน:
- ููุณ ุงูุนูููุฉ ุงูุณุงุจูุฉ
- ุชุญุฏูุซ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:
- ุฅุฐุง ูุดู Reverse Geocoding: ูููู ุงูุชุณุฌูู ูุน ุงูุฅุญุฏุงุซูุงุช ููุท
- ุงูุญููู ุงููุตูุฉ ุชุจูู ูุงุฑุบุฉ (NULL)

## ๐ ุชุฏูู ุงูุจุญุซ ููุทุงูุจ

### ุงูุณููุงุฑูู A: ุงูุจุญุซ ุจุงูุฅุญุฏุงุซูุงุช (ุงูุฃูุถููุฉ)
```
GET /api/teacher-search/search/coordinates?latitude=33.3152&longitude=44.3661&maxDistance=5&page=1&limit=10
```

**ุงููุนุงููุงุช:**
- `latitude` (ูุทููุจ): ุฎุท ุงูุนุฑุถ
- `longitude` (ูุทููุจ): ุฎุท ุงูุทูู  
- `maxDistance` (ุงุฎุชูุงุฑู): ุงููุณุงูุฉ ุงููุตูู ุจุงููููููุชุฑ (ุงูุชุฑุงุถู: 5)
- `page` (ุงุฎุชูุงุฑู): ุฑูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 1)
- `limit` (ุงุฎุชูุงุฑู): ุนุฏุฏ ุงููุชุงุฆุฌ (ุงูุชุฑุงุถู: 10)

**ุงููุชูุฌุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุงูุนุซูุฑ ุนูู ุงููุฏุฑุณูู",
  "data": {
    "teachers": [
      {
        "id": "uuid",
        "name": "ุฃุญูุฏ ูุญูุฏ",
        "phone": "+964501234567",
        "address": "ุจุบุฏุงุฏุ ุงูุนุฑุงู",
        "bio": "ูุฏุฑุณ ุฑูุงุถูุงุช ูุน ุฎุจุฑุฉ 5 ุณููุงุช",
        "experienceYears": 5,
        "latitude": 33.3152,
        "longitude": 44.3661,
        "governorate": "ุจุบุฏุงุฏ",
        "city": "ุจุบุฏุงุฏ",
        "district": "ุงููุฑุฎ",
        "distance": 2.5
      }
    ]
  },
  "count": 1
}
```

### ุงูุณููุงุฑูู B: ุงูุจุญุซ ุจุฃุณูุงุก ุงูููุงูุน
```
GET /api/teacher-search/search/location?governorate=ุจุบุฏุงุฏ&city=ุจุบุฏุงุฏ&page=1&limit=10
```

**ุงููุนุงููุงุช:**
- `governorate` (ุงุฎุชูุงุฑู): ุงููุญุงูุธุฉ
- `city` (ุงุฎุชูุงุฑู): ุงููุฏููุฉ
- `district` (ุงุฎุชูุงุฑู): ุงููุงุญูุฉ
- `page` (ุงุฎุชูุงุฑู): ุฑูู ุงูุตูุญุฉ
- `limit` (ุงุฎุชูุงุฑู): ุนุฏุฏ ุงููุชุงุฆุฌ

**ููุงุญุธุฉ:** ูุฌุจ ุชุญุฏูุฏ ูููุน ูุงุญุฏ ุนูู ุงูุฃูู

## ๐ ุงูุญุตูู ุนูู ุงูููุงูุน ุงููุชุงุญุฉ

### 1. ุงูุญุตูู ุนูู ุงููุญุงูุธุงุช:
```
GET /api/teacher-search/governorates
```

### 2. ุงูุญุตูู ุนูู ูุฏู ูุญุงูุธุฉ ูุนููุฉ:
```
GET /api/teacher-search/cities/ุจุบุฏุงุฏ
```

## ๐๏ธ ุงูุฎุฏูุงุช ุงููุณุชุฎุฏูุฉ

### 1. LocationService
- `getLocationFromCoordinates()`: Reverse Geocoding
- `getAvailableGovernorates()`: ุงููุญุงูุธุงุช ุงููุชุงุญุฉ
- `getAvailableCities()`: ุงููุฏู ุงููุชุงุญุฉ
- `calculateDistance()`: ุญุณุงุจ ุงููุณุงูุฉ

### 2. TeacherSearchService
- `searchTeachersByCoordinates()`: ุงูุจุญุซ ุจุงูุฅุญุฏุงุซูุงุช
- `searchTeachersByLocation()`: ุงูุจุญุซ ุจุฃุณูุงุก ุงูููุงูุน
- `getAvailableGovernorates()`: ุงููุญุงูุธุงุช
- `getAvailableCities()`: ุงููุฏู

## โ๏ธ ููุงุญุธุงุช ุชุดุบูููุฉ

### 1. ุญุฏูุฏ ุงุณุชุฎุฏุงู Nominatim:
- ุงุณุชุฏุนุงุก ุงูุฎุฏูุฉ ููุท ุนูุฏ ุงูุชุณุฌูู/ุงูุชุญุฏูุซ
- ุฅุถุงูุฉ User-Agent: `DirasiqApp/1.0`
- ูููุฉ: 10 ุซูุงูู
- ูุง ุชุณุชุฏุนู ุงูุฎุฏูุฉ ุนูุฏ ูู ุจุญุซ

### 2. ุงูุชุฎุฒูู ุงููุคูุช:
- ููุถู ุชุฎุฒูู ูุชุงุฆุฌ ุงูุฅุญุฏุงุซูุงุช ุงูุดุงุฆุนุฉ
- ุชูููู ุงูุทูุจุงุช ููุฎุฏูุฉ ุงูุฎุงุฑุฌูุฉ

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:
- ุฅุฐุง ูุดู Reverse Geocoding: ุงุณุชูุฑ ูุน ุงูุฅุญุฏุงุซูุงุช ููุท
- ูุง ุชููู ุนูููุฉ ุงูุชุณุฌูู

## ๐ ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู

### 1. ุชุณุฌูู ูุนูู ุฌุฏูุฏ:
```json
POST /api/auth/register/teacher
{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "password": "Password123",
  "phone": "+964501234567",
  "address": "ุจุบุฏุงุฏุ ุงูุนุฑุงู",
  "bio": "ูุฏุฑุณ ุฑูุงุถูุงุช ูุน ุฎุจุฑุฉ 5 ุณููุงุช",
  "experienceYears": 5,
  "gradeIds": ["uuid1", "uuid2"],
  "studyYear": "2024-2025",
  "latitude": 33.3152,
  "longitude": 44.3661
}
```

### 2. ุงูุจุญุซ ุนู ูุฏุฑุณูู ูุฑูุจูู:
```json
GET /api/teacher-search/search/coordinates?latitude=33.3152&longitude=44.3661&maxDistance=10
```

### 3. ุงูุจุญุซ ูู ูุญุงูุธุฉ ูุนููุฉ:
```json
GET /api/teacher-search/search/location?governorate=ุจุบุฏุงุฏ&city=ุจุบุฏุงุฏ
```

## ๐ฑ ุงุณุชุฎุฏุงู ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

### 1. ุงูุญุตูู ุนูู ูููุน ุงููุณุชุฎุฏู:
```javascript
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    (position) => {
      const { latitude, longitude } = position.coords;
      // ุงุณุชุฎุฏุงู ุงูุฅุญุฏุงุซูุงุช ููุจุญุซ
    },
    (error) => {
      // ุงุณุชุฎุฏุงู ุงูุจุญุซ ุจุฃุณูุงุก ุงูููุงูุน
    }
  );
}
```

### 2. ุงูุจุญุซ ุจุงูุฅุญุฏุงุซูุงุช:
```javascript
const searchTeachers = async (lat, lon, maxDistance = 5) => {
  const response = await fetch(
    `/api/teacher-search/search/coordinates?latitude=${lat}&longitude=${lon}&maxDistance=${maxDistance}`
  );
  const result = await response.json();
  return result.data.teachers;
};
```

### 3. ุงูุจุญุซ ุจุฃุณูุงุก ุงูููุงูุน:
```javascript
const searchTeachersByLocation = async (governorate, city) => {
  const response = await fetch(
    `/api/teacher-search/search/location?governorate=${governorate}&city=${city}`
  );
  const result = await response.json();
  return result.data.teachers;
};

// ูุซุงู ุนูู ุงูุจุญุซ ูู ุจุบุฏุงุฏ
const searchTeachersInBaghdad = async () => {
  const teachers = await searchTeachersByLocation('ุจุบุฏุงุฏ', 'ุจุบุฏุงุฏ');
  console.log('ุงููุฏุฑุณูู ูู ุจุบุฏุงุฏ:', teachers);
};

// ูุซุงู ุนูู ุงูุจุญุซ ูู ุงูุจุตุฑุฉ
const searchTeachersInBasra = async () => {
  const teachers = await searchTeachersByLocation('ุงูุจุตุฑุฉ', 'ุงูุจุตุฑุฉ');
  console.log('ุงููุฏุฑุณูู ูู ุงูุจุตุฑุฉ:', teachers);
};
```

## ๐ง ุงูุชุทููุฑ ุงููุณุชูุจูู

### 1. ุชุญุณููุงุช ููุชุฑุญุฉ:
- ุฅุถุงูุฉ ุฎูุงุฑุฒููุงุช ุจุญุซ ูุชูุฏูุฉ
- ุฏุนู ุงูุจุญุซ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
- ุฅุถุงูุฉ ุฎุฑุงุฆุท ุชูุงุนููุฉ
- ุฏุนู ุงูุจุญุซ ุจุงููุณูู ูุงูููุงุฑุงุช

### 2. ุฎุฏูุงุช ุฅุถุงููุฉ:
- ุฏุนู ุฎุฏูุงุช Reverse Geocoding ูุฏููุนุฉ
- ุฅุถุงูุฉ ุฎุฏูุงุช ุฎุฑุงุฆุท ูุญููุฉ
- ุฏุนู ุงูุจุญุซ ุงูุตูุชู

---

**ููุงุญุธุฉ:** ูุฐุง ุงูุฏููู ูุบุทู ุงูุฃุณุงุณูุงุช. ูููู ุชุทููุฑู ูุฅุถุงูุฉ ููุฒุงุช ุฃุฎุฑู ุญุณุจ ุงูุญุงุฌุฉ.

## ๐ฎ๐ถ ูุนูููุงุช ุฎุงุตุฉ ุจุงูุนุฑุงู

### ุงููููุน ุงูุฌุบุฑุงูู:
- **ุงูุนุงุตูุฉ**: ุจุบุฏุงุฏ (33.3152ยฐN, 44.3661ยฐE)
- **ุงููุณุงุญุฉ**: ุญูุงูู 438,317 ููยฒ
- **ุนุฏุฏ ุงููุญุงูุธุงุช**: 19 ูุญุงูุธุฉ
- **ุงูููุงุฎ**: ุตุญุฑุงูู ูู ุงูุฌููุจุ ุฌุจูู ูู ุงูุดูุงู

### ุงููุญุงูุธุงุช ุงูุฑุฆูุณูุฉ:
1. **ุจุบุฏุงุฏ** - ุงูุนุงุตูุฉ ูุงููุฑูุฒ ุงูุฅุฏุงุฑู
2. **ุงูุจุตุฑุฉ** - ุงููููุงุก ุงูุฑุฆูุณู ูุงููุฑูุฒ ุงูุงูุชุตุงุฏู
3. **ุงูููุตู** - ุงููุฑูุฒ ุงูุซูุงูู ูุงูุชุงุฑูุฎู
4. **ุฃุฑุจูู** - ุนุงุตูุฉ ุฅูููู ูุฑุฏุณุชุงู
5. **ุงููุฌู** - ุงููุฑูุฒ ุงูุฏููู ุงูุดูุนู
6. **ูุฑุจูุงุก** - ุงููุฑูุฒ ุงูุฏููู ุงูููุฏุณ

### ุงูุชุทุจููุงุช ุงูุนูููุฉ:
- **ุงูุจุญุซ ุนู ูุฏุฑุณูู**: ูููู ููุทูุงุจ ุงูุจุญุซ ุนู ูุฏุฑุณูู ูู ูุญุงูุธุชูู
- **ุงูุชุนููู ุนู ุจุนุฏ**: ุฏุนู ุงูุชุนููู ูู ุงูููุงุทู ุงููุงุฆูุฉ
- **ุงูุชูุงุตู**: ุชุณููู ุงูุชูุงุตู ุจูู ุงูุทูุงุจ ูุงููุฏุฑุณูู
- **ุงูุชุทููุฑ**: ุฏุนู ุชุทููุฑ ุงูุชุนููู ูู ุฌููุน ุฃูุญุงุก ุงูุนุฑุงู

### ุงูุชุญุฏูุงุช ูุงูุญููู:
- **ุงูุชุบุทูุฉ ุงูุฌุบุฑุงููุฉ**: ุฏุนู ุฌููุน ุงููุญุงูุธุงุช ุงูุนุฑุงููุฉ
- **ุงููุบุฉ**: ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุงููุฑุฏูุฉ
- **ุงูุจููุฉ ุงูุชุญุชูุฉ**: ุชุญุณูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- **ุงูุชุนููู**: ุฑูุน ูุณุชูู ุงูุชุนููู ูู ุฌููุน ุงูููุงุทู
